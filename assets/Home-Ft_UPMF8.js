import{d as je,o as Pe,w as Ne,r as m,a as ke,c as Be,b as f,n as J,e as Ke,v as Ze,p as Me,f as Se,g as Je,h as Qe,u as et,i as me,j as tt}from"./index-tb22uY8x.js";const Oe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='20px'%20height='16px'%20viewBox='0%200%2020%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Generator:%20Sketch%203.8.1%20(29687)%20-%20http://www.bohemiancoding.com/sketch%20--%3e%3ctitle%3eimage_picture%20[%23973]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-340.000000,%20-3881.000000)'%20fill='%23000000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M296,3725.5%20C296,3724.948%20296.448,3724.5%20297,3724.5%20C297.552,3724.5%20298,3724.948%20298,3725.5%20C298,3726.052%20297.552,3726.5%20297,3726.5%20C296.448,3726.5%20296,3726.052%20296,3725.5%20L296,3725.5%20Z%20M296.75,3728.75%20L300,3733%20L288,3733%20L292.518,3726.812%20L295.354,3730.625%20L296.75,3728.75%20Z%20M302,3734%20C302,3734.552%20301.552,3735%20301,3735%20L287,3735%20C286.448,3735%20286,3734.552%20286,3734%20L286,3724%20C286,3723.448%20286.448,3723%20287,3723%20L301,3723%20C301.552,3723%20302,3723.448%20302,3724%20L302,3734%20Z%20M302,3721%20L286,3721%20C284.896,3721%20284,3721.895%20284,3723%20L284,3735%20C284,3736.104%20284.896,3737%20286,3737%20L302,3737%20C303.105,3737%20304,3736.104%20304,3735%20L304,3723%20C304,3721.895%20303.105,3721%20302,3721%20L302,3721%20Z'%20id='image_picture-[%23973]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-crop'%3e%3cpath%20d='M6.13%201L6%2016a2%202%200%200%200%202%202h15'%3e%3c/path%3e%3cpath%20d='M1%206.13L16%206a2%202%200%200%201%202%202v15'%3e%3c/path%3e%3c/svg%3e",Fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2023.0.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Icons'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2032%2032'%20style='enable-background:new%200%200%2032%2032;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%20.st1{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;}%20.st2{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:6,6;}%20.st3{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:4,4;}%20.st4{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;}%20.st5{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-dasharray:3.1081,3.1081;}%20.st6{fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:4,3;}%20%3c/style%3e%3cpath%20class='st0'%20d='M16.9,14c-1.8,0-3.3,1.4-3.3,3.1v0.7c0,1.1-0.6,1.9-1.6,2.2l0,0h1.6l3.1,0c1.8,0,3.4-1.4,3.3-3.1%20C20,15.3,18.6,14,16.9,14z'/%3e%3cpath%20class='st0'%20d='M20.3,11.5C18.9,11.2,17.5,11,16,11c-7.2,0-13,4-13,9c0,1,0.2,2,0.7,2.9c1,2,3.6,2.6,5.4,1.3l0,0%20c2.4-1.7,5.8,0,5.8,3V29c0.4,0,0.7,0,1.1,0c7.2,0,13-4,13-9c0-2.2-1.1-4.2-2.9-5.7'/%3e%3cpath%20class='st0'%20d='M17.4,14.1l9.8-8.8c0.4-0.4,1.1-0.4,1.5,0l0,0c0.4,0.4,0.4,1,0,1.4L20,16'/%3e%3c/svg%3e",He="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-download'%3e%3cpath%20d='M21%2015v4a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2v-4'%3e%3c/path%3e%3cpolyline%20points='7%2010%2012%2015%2017%2010'%3e%3c/polyline%3e%3cline%20x1='12'%20y1='15'%20x2='12'%20y2='3'%3e%3c/line%3e%3c/svg%3e";/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Re(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(l,o).enumerable})),t.push.apply(t,i)}return t}function be(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Re(Object(t),!0).forEach(function(i){ot(l,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(t,i))})}return l}function at(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(l,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,We(i.key),i)}}function nt(l,e,t){return e&&Ee(l.prototype,e),t&&Ee(l,t),Object.defineProperty(l,"prototype",{writable:!1}),l}function ot(l,e,t){return e=We(e),e in l?Object.defineProperty(l,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[e]=t,l}function we(){return we=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(l[i]=t[i])}return l},we.apply(this,arguments)}function it(l,e){if(typeof l!="object"||l===null)return l;var t=l[Symbol.toPrimitive];if(t!==void 0){var i=t.call(l,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(l)}function We(l){var e=it(l,"string");return typeof e=="symbol"?e:String(e)}var ze={exports:{}};(function(l){typeof window>"u"||function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return!!new Blob}catch{return!1}}(),o=i&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),c=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,C=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(i||c)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(g){var h,b,p,k,s,x,B,w,I;if(h=g.match(C),!h)throw new Error("invalid data URI");for(b=h[2]?h[1]:"text/plain"+(h[3]||";charset=US-ASCII"),p=!!h[4],k=g.slice(h[0].length),p?s=atob(k):s=decodeURIComponent(k),x=new ArrayBuffer(s.length),B=new Uint8Array(x),w=0;w<s.length;w+=1)B[w]=s.charCodeAt(w);return i?new Blob([o?B:x],{type:b}):(I=new c,I.append(x),I.getBlob(b))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(g,h,b){var p=this;setTimeout(function(){b&&t.toDataURL&&u?g(u(p.toDataURL(h,b))):g(p.mozGetAsFile("blob",h))})}:t.toDataURL&&u&&(t.msToBlob?t.toBlob=function(g,h,b){var p=this;setTimeout(function(){(h&&h!=="image/png"||b)&&t.toDataURL&&u?g(u(p.toDataURL(h,b))):g(p.msToBlob(h))})}:t.toBlob=function(g,h,b){var p=this;setTimeout(function(){g(u(p.toDataURL(h,b)))})})),l.exports?l.exports=u:e.dataURLtoBlob=u}(window)})(ze);var De=ze.exports,lt=function(l){return typeof Blob>"u"?!1:l instanceof Blob||Object.prototype.toString.call(l)==="[object Blob]"},Le={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},rt=typeof window<"u"&&typeof window.document<"u",O=rt?window:{},ye=function(l){return l>0&&l<1/0},st=Array.prototype.slice;function _e(l){return Array.from?Array.from(l):st.call(l)}var ut=/^image\/.+$/;function Ie(l){return ut.test(l)}function ct(l){var e=Ie(l)?l.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var Ve=String.fromCharCode;function dt(l,e,t){var i="",o;for(t+=e,o=e;o<t;o+=1)i+=Ve(l.getUint8(o));return i}var vt=O.btoa;function Ue(l,e){for(var t=[],i=8192,o=new Uint8Array(l);o.length>0;)t.push(Ve.apply(null,_e(o.subarray(0,i)))),o=o.subarray(i);return"data:".concat(e,";base64,").concat(vt(t.join("")))}function ht(l){var e=new DataView(l),t;try{var i,o,c;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var C=e.byteLength,u=2;u+1<C;){if(e.getUint8(u)===255&&e.getUint8(u+1)===225){o=u;break}u+=1}if(o){var g=o+4,h=o+10;if(dt(e,g,4)==="Exif"){var b=e.getUint16(h);if(i=b===18761,(i||b===19789)&&e.getUint16(h+2,i)===42){var p=e.getUint32(h+4,i);p>=8&&(c=h+p)}}}if(c){var k=e.getUint16(c,i),s,x;for(x=0;x<k;x+=1)if(s=c+x*12+2,e.getUint16(s,i)===274){s+=8,t=e.getUint16(s,i),e.setUint16(s,1,i);break}}}catch{t=1}return t}function gt(l){var e=0,t=1,i=1;switch(l){case 2:t=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:i}}var ft=/\.\d*(?:0|9){12}\d*$/;function Te(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ft.test(l)?Math.round(l*e)/e:l}function le(l){var e=l.aspectRatio,t=l.height,i=l.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",c=ye(i),C=ye(t);if(c&&C){var u=t*e;(o==="contain"||o==="none")&&u>i||o==="cover"&&u<i?t=i/e:i=t*e}else c?t=i/e:C&&(i=t*e);return{width:i,height:t}}function pt(l){for(var e=_e(new Uint8Array(l)),t=e.length,i=[],o=0;o+3<t;){var c=e[o],C=e[o+1];if(c===255&&C===218)break;if(c===255&&C===216)o+=2;else{var u=e[o+2]*256+e[o+3],g=o+u+2,h=e.slice(o,g);i.push(h),o=g}}return i.reduce(function(b,p){return p[0]===255&&p[1]===225?b.concat(p):b},[])}function mt(l,e){var t=_e(new Uint8Array(l));if(t[2]!==255||t[3]!==224)return l;var i=t[4]*256+t[5],o=[255,216].concat(e,t.slice(4+i));return new Uint8Array(o)}var bt=O.ArrayBuffer,xe=O.FileReader,X=O.URL||O.webkitURL,wt=/\.\w+$/,yt=O.Compressor,Ct=function(){function l(e,t){at(this,l),this.file=e,this.exif=[],this.image=new Image,this.options=be(be({},Le),t),this.aborted=!1,this.result=null,this.init()}return nt(l,[{key:"init",value:function(){var e=this,t=this.file,i=this.options;if(!lt(t)){this.fail(new Error("The first argument must be a File or Blob object."));return}var o=t.type;if(!Ie(o)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!X||!xe){this.fail(new Error("The current browser does not support image compression."));return}bt||(i.checkOrientation=!1,i.retainExif=!1);var c=o==="image/jpeg",C=c&&i.checkOrientation,u=c&&i.retainExif;if(X&&!C&&!u)this.load({url:X.createObjectURL(t)});else{var g=new xe;this.reader=g,g.onload=function(h){var b=h.target,p=b.result,k={},s=1;C&&(s=ht(p),s>1&&we(k,gt(s))),u&&(e.exif=pt(p)),C||u?!X||s>1?k.url=Ue(p,o):k.url=X.createObjectURL(t):k.url=p,e.load(k)},g.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},g.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},g.onloadend=function(){e.reader=null},C||u?g.readAsArrayBuffer(t):g.readAsDataURL(t)}}},{key:"load",value:function(e){var t=this,i=this.file,o=this.image;o.onload=function(){t.draw(be(be({},e),{},{naturalWidth:o.naturalWidth,naturalHeight:o.naturalHeight}))},o.onabort=function(){t.fail(new Error("Aborted to load the image."))},o.onerror=function(){t.fail(new Error("Failed to load the image."))},O.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(O.navigator.userAgent)&&(o.crossOrigin="anonymous"),o.alt=i.name,o.src=e.url}},{key:"draw",value:function(e){var t=this,i=e.naturalWidth,o=e.naturalHeight,c=e.rotate,C=c===void 0?0:c,u=e.scaleX,g=u===void 0?1:u,h=e.scaleY,b=h===void 0?1:h,p=this.file,k=this.image,s=this.options,x=document.createElement("canvas"),B=x.getContext("2d"),w=Math.abs(C)%180===90,I=(s.resize==="contain"||s.resize==="cover")&&ye(s.width)&&ye(s.height),d=Math.max(s.maxWidth,0)||1/0,U=Math.max(s.maxHeight,0)||1/0,E=Math.max(s.minWidth,0)||0,P=Math.max(s.minHeight,0)||0,T=i/o,_=s.width,R=s.height;if(w){var L=[U,d];d=L[0],U=L[1];var re=[P,E];E=re[0],P=re[1];var se=[R,_];_=se[0],R=se[1]}I&&(T=_/R);var G=le({aspectRatio:T,width:d,height:U},"contain");d=G.width,U=G.height;var F=le({aspectRatio:T,width:E,height:P},"cover");if(E=F.width,P=F.height,I){var H=le({aspectRatio:T,width:_,height:R},s.resize);_=H.width,R=H.height}else{var ue=le({aspectRatio:T,width:_,height:R}),ce=ue.width;_=ce===void 0?i:ce;var W=ue.height;R=W===void 0?o:W}_=Math.floor(Te(Math.min(Math.max(_,E),d))),R=Math.floor(Te(Math.min(Math.max(R,P),U)));var $=-_/2,q=-R/2,de=_,ve=R,N=[];if(I){var Q=0,z=0,ee=i,te=o,he=le({aspectRatio:T,width:i,height:o},{contain:"cover",cover:"contain"}[s.resize]);ee=he.width,te=he.height,Q=(i-ee)/2,z=(o-te)/2,N.push(Q,z,ee,te)}if(N.push($,q,de,ve),w){var ge=[R,_];_=ge[0],R=ge[1]}x.width=_,x.height=R,Ie(s.mimeType)||(s.mimeType=p.type);var ae="transparent";p.size>s.convertSize&&s.convertTypes.indexOf(s.mimeType)>=0&&(s.mimeType="image/jpeg");var K=s.mimeType==="image/jpeg";if(K&&(ae="#fff"),B.fillStyle=ae,B.fillRect(0,0,_,R),s.beforeDraw&&s.beforeDraw.call(this,B,x),!this.aborted&&(B.save(),B.translate(_/2,R/2),B.rotate(C*Math.PI/180),B.scale(g,b),B.drawImage.apply(B,[k].concat(N)),B.restore(),s.drew&&s.drew.call(this,B,x),!this.aborted)){var ne=function(M){if(!t.aborted){var oe=function(V){return t.done({naturalWidth:i,naturalHeight:o,result:V})};if(M&&K&&s.retainExif&&t.exif&&t.exif.length>0){var ie=function(V){return oe(De(Ue(mt(V,t.exif),s.mimeType)))};if(M.arrayBuffer)M.arrayBuffer().then(ie).catch(function(){t.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var j=new xe;t.reader=j,j.onload=function(V){var Ce=V.target;ie(Ce.result)},j.onabort=function(){t.fail(new Error("Aborted to read the compressed image with FileReader."))},j.onerror=function(){t.fail(new Error("Failed to read the compressed image with FileReader."))},j.onloadend=function(){t.reader=null},j.readAsArrayBuffer(M)}}else oe(M)}};x.toBlob?x.toBlob(ne,s.mimeType,s.quality):ne(De(x.toDataURL(s.mimeType,s.quality)))}}},{key:"done",value:function(e){var t=e.naturalWidth,i=e.naturalHeight,o=e.result,c=this.file,C=this.image,u=this.options;if(X&&C.src.indexOf("blob:")===0&&X.revokeObjectURL(C.src),o)if(u.strict&&!u.retainExif&&o.size>c.size&&u.mimeType===c.type&&!(u.width>t||u.height>i||u.minWidth>t||u.minHeight>i||u.maxWidth<t||u.maxHeight<i))o=c;else{var g=new Date;o.lastModified=g.getTime(),o.lastModifiedDate=g,o.name=c.name,o.name&&o.type!==c.type&&(o.name=o.name.replace(wt,ct(o.type)))}else o=c;this.result=o,u.success&&u.success.call(this,o)}},{key:"fail",value:function(e){var t=this.options;if(t.error)t.error.call(this,e);else throw e}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=yt,l}},{key:"setDefaults",value:function(e){we(Le,e)}}]),l}();const xt=l=>(Me("data-v-528732de"),l=l(),Se(),l),kt={class:"main-editor-div",id:"MainEditorId"},Bt={class:"blur-div"},It={class:"canvas-resize-div",id:"CanvasImageCropRectangleIdDiv"},_t={id:"CropRectangleIdDiv",class:"resizable"},Rt=xt(()=>f("div",{class:"show-pre-div"},[f("canvas",{width:"200",height:"200",id:"canvasShowPreviewCropId"})],-1)),Et=je({__name:"ImageEditor",props:{fileImage:{},colorBrush:{},borderCropDivColor:{},backgroundCropDivColor:{},maxHeight:{},maxWidth:{}},emits:["finishEditing"],setup(l,{expose:e,emit:t}){const i=l;Pe(async()=>{var n,a;await ae(),d.value=document.getElementById("CropRectangleIdDiv"),w.value=(n=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:n.getBoundingClientRect().top,I.value=(a=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:a.getBoundingClientRect().left}),Ne(()=>i.fileImage,async()=>{var n,a;await ae(),d.value=document.getElementById("CropRectangleIdDiv"),w.value=(n=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:n.getBoundingClientRect().top,I.value=(a=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:a.getBoundingClientRect().left});const o=m(),c=m(),C=m(!1),u=m(4),g=m(!1),h=m(50),b=m(0),p=m(0),k=m(0),s=m(0),x=m(0),B=m(0),w=m(0),I=m(0),d=m(document.createElement("div")),U=m(""),E=m(!1),P=m(0),T=m(0),_=m(0),R=m(0),L=m(),re=m();function se(){i.fileImage&&(E.value=!0)}function G(n){let a=0;if(n!=null){do a+=n.offsetTop,n=n.offsetParent;while(n);a=a<0?0:a}return a}function F(n,a){var r;n.preventDefault(),b.value=parseFloat(getComputedStyle(d.value,null).getPropertyValue("width").replace("px","")),p.value=parseFloat(getComputedStyle(d.value,null).getPropertyValue("height").replace("px","")),k.value=n.pageX,s.value=n.pageY,I.value=(r=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:r.getBoundingClientRect().left;let v=document.getElementById("CanvasImageCropRectangleIdDiv");w.value=G(v),x.value=s.value-w.value,B.value=k.value-I.value,U.value=a,window.addEventListener("mousemove",z),window.addEventListener("mouseup",ue)}function H(n,a){var r;n.preventDefault(),b.value=parseFloat(getComputedStyle(d.value,null).getPropertyValue("width").replace("px","")),p.value=parseFloat(getComputedStyle(d.value,null).getPropertyValue("height").replace("px","")),k.value=n.touches[0].pageX,s.value=n.touches[0].pageY,I.value=(r=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:r.getBoundingClientRect().left;let v=document.getElementById("CanvasImageCropRectangleIdDiv");w.value=G(v),x.value=s.value-w.value,B.value=k.value-I.value,U.value=a,window.addEventListener("touchmove",z),window.addEventListener("touchend",ce)}function ue(n){window.removeEventListener("mousemove",z)}function ce(n){window.removeEventListener("touchmove",z)}function W(n,a,r,v,y){var D,S;let Z=(D=o.value)==null?void 0:D.getBoundingClientRect().width,Y=(S=o.value)==null?void 0:S.getBoundingClientRect().height;r>I.value+Z&&y.includes("right")&&(d.value.style.width=Z-d.value.offsetLeft+"px"),r<I.value&&y.includes("left")&&(d.value.style.left="0px"),v>w.value+Y&&y.includes("bottom")&&(d.value.style.height=Y-d.value.offsetTop+"px"),v<w.value&&y.includes("top")&&(d.value.style.top="0px"),v+a>w.value+Y&&y.includes("top")&&(d.value.style.top="",d.value.style.bottom="0px")}function $(n,a){return a=="right"?b.value+(n-k.value):b.value-(n-k.value)}function q(n,a){return a=="top"?p.value-(n-s.value):p.value+(n-s.value)}function de(n,a){var r;let v=(r=o.value)==null?void 0:r.getBoundingClientRect().width;a>h.value&&n<I.value+v&&(d.value.style.width=a+"px")}function ve(n,a){a>h.value&&n>I.value&&(d.value.style.left=B.value+(n-k.value)+"px",d.value.style.width=a+"px")}function N(n,a){var r;let v=(r=o.value)==null?void 0:r.getBoundingClientRect().height;a>h.value&&n<w.value+v&&(d.value.style.height=a+"px",d.value.style.top=G(d.value)-w.value+"px",d.value.style.bottom="")}function Q(n,a){var r;let v=(r=o.value)==null?void 0:r.getBoundingClientRect().height;a>h.value&&n>w.value&&(n+a>w.value+v?(d.value.style.top="",d.value.style.bottom="0px"):d.value.style.top=x.value+n-s.value+"px",d.value.style.height=a+"px")}async function z(n){let a,r,v=te(n),y=ee(n);switch(U.value){case"bottom-right":a=$(v,"right"),r=q(y,"bottom"),W(a,r,v,y,"bottom-right"),de(v,a),N(y,r);break;case"bottom-left":a=$(v,"left"),r=q(y,"bottom"),W(a,r,v,y,"bottom-left"),ve(v,a),N(y,r);break;case"top-right":a=$(v,"right"),r=q(y,"top"),W(a,r,v,y,"top-right"),de(v,a),Q(y,r);break;case"top-left":a=$(v,"left"),r=q(y,"top"),W(a,r,v,y,"top-left"),ve(v,a),Q(y,r);break}}function ee(n){var a;let r=n.pageY?n.pageY:n.touches[0].pageY,v=(a=document.getElementById("MainEditorId"))==null?void 0:a.scrollTop;return r+v}function te(n){return n.pageX?n.pageX:n.touches[0].pageX}async function he(){let n=document.getElementById("canvasShowPreviewCropId");if(n.getContext&&n){let a=n.getContext("2d"),r=new Image;return r.src=URL.createObjectURL(L.value),new Promise((v,y)=>{r.onload=()=>{var D,S;let Z=parseFloat(getComputedStyle(d.value,null).getPropertyValue("left").replace("px","")),Y=parseFloat(getComputedStyle(d.value,null).getPropertyValue("top").replace("px","")),$e=(D=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:D.getBoundingClientRect().width,qe=(S=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:S.getBoundingClientRect().height,fe=r.naturalWidth/$e,pe=r.naturalHeight/qe;n.width=Math.ceil(d.value.getBoundingClientRect().width*fe),n.height=Math.ceil(d.value.getBoundingClientRect().height*pe),a.drawImage(r,Z*fe,Y*pe,d.value.getBoundingClientRect().width*fe,d.value.getBoundingClientRect().height*pe,0,0,d.value.getBoundingClientRect().width*fe,d.value.getBoundingClientRect().height*pe),v(r.naturalWidth)},r.onerror=y})}}async function ge(n){return new Promise((a,r)=>{new Ct(n,{strict:!0,convertTypes:"image/png",convertSize:5e6,minHeight:0,minWidth:0,quality:.6,success:a,error:r})})}async function ae(){if(i.fileImage){const n=i.fileImage,a=await ge(n);L.value=a,K(a)}}function K(n){if(o.value=document.getElementById("mainImageCanvasId"),o.value.getContext&&o.value){c.value=o.value.getContext("2d");let a=new Image;a.src=URL.createObjectURL(n),a.onload=function(){var r,v;let y=a.naturalWidth,D=a.naturalHeight;o.value.width=y,o.value.height=D,(r=c.value)==null||r.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,y,D),re.value=(v=c.value)==null?void 0:v.getImageData(0,0,a.naturalWidth,a.naturalHeight)},d.value.style.left="0px",d.value.style.top="0px",d.value.style.width=h.value+"px",d.value.style.height=h.value+"px"}}async function ne(n){var a;let r=(a=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:a.getBoundingClientRect().top;return n.offsetY?n.offsetY:n.touches[0].clientY-r}async function M(n){var a;let r=(a=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:a.getBoundingClientRect().left;return n.offsetX?n.offsetX:n.touches[0].clientX-r}async function oe(n){var a,r,v,y,D,S;if(n.preventDefault(),g.value){C.value=!0,P.value=(a=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:a.getBoundingClientRect().width,T.value=(r=document.getElementById("CanvasImageCropRectangleIdDiv"))==null?void 0:r.getBoundingClientRect().height,_.value=((v=o.value)==null?void 0:v.width)/P.value,R.value=((y=o.value)==null?void 0:y.height)/T.value;let Z=await M(n)*_.value,Y=await ne(n)*R.value;c.value.lineWidth=u.value*_.value,c.value.lineCap="round",c.value.strokeStyle=i.colorBrush==""?"#000000":i.colorBrush,(D=c.value)==null||D.beginPath(),(S=c.value)==null||S.moveTo(Z,Y)}}function ie(n){n.preventDefault(),C.value=!1}async function j(n){var a,r;if(n.preventDefault(),!C.value)return;let v=Math.ceil(await M(n)*_.value),y=Math.ceil(await ne(n)*R.value);(a=c.value)==null||a.lineTo(v,y),(r=c.value)==null||r.stroke()}function V(){i.fileImage&&(g.value=!0)}function Ce(){var n;i.fileImage&&((n=o.value)==null||n.toBlob(a=>{const r=URL.createObjectURL(a),v=document.createElement("a");v.href=r,v.setAttribute("download","test"),document.body.appendChild(v),v.click(),v.remove()}))}async function Ye(){var n;E.value?(await he(),document.getElementById("canvasShowPreviewCropId").toBlob(a=>{L.value=a,K(L.value),E.value=!1})):g.value&&((n=o.value)==null||n.toBlob(a=>{L.value=a,K(L.value),g.value=!1}))}async function Xe(){g.value=!1,E.value=!1}function Ge(){var n;const a=new File([L.value],((n=i.fileImage)==null?void 0:n.name.split(".")[0])+".png",{type:"image/png"});t("finishEditing",a)}return e({enablePainting:V,enableCroping:se,finishEditing:Ge,download:Ce,saveChanges:Ye,cancelChanges:Xe}),(n,a)=>(ke(),Be("div",kt,[f("div",Bt,[f("div",It,[f("canvas",{style:J({maxWidth:n.maxWidth?n.maxWidth+"px":"unset",maxHeight:n.maxHeight?n.maxHeight+"px":"unset"}),class:"canvas-style",onTouchmove:j,onTouchend:ie,onTouchstart:oe,onMousedown:oe,onMouseup:ie,onMousemove:j,width:"400",height:"300",id:"mainImageCanvasId"},null,36),Ke(f("div",_t,[f("div",{class:"resizers",style:J({border:`3px solid ${n.borderCropDivColor}`})},[f("div",{style:J({border:`3px solid ${n.borderCropDivColor}`,background:n.backgroundCropDivColor}),onTouchstart:a[0]||(a[0]=r=>H(r,"top-left")),onMousedown:a[1]||(a[1]=r=>F(r,"top-left")),class:"resizer top-left"},null,36),f("div",{style:J({border:`3px solid ${n.borderCropDivColor}`,background:n.backgroundCropDivColor}),onTouchstart:a[2]||(a[2]=r=>H(r,"top-right")),onMousedown:a[3]||(a[3]=r=>F(r,"top-right")),class:"resizer top-right"},null,36),f("div",{style:J({border:`3px solid ${n.borderCropDivColor}`,background:n.backgroundCropDivColor}),onTouchstart:a[4]||(a[4]=r=>H(r,"bottom-left")),onMousedown:a[5]||(a[5]=r=>F(r,"bottom-left")),class:"resizer bottom-left"},null,36),f("div",{style:J({border:`3px solid ${n.borderCropDivColor}`,background:n.backgroundCropDivColor}),onTouchstart:a[6]||(a[6]=r=>H(r,"bottom-right")),onMousedown:a[7]||(a[7]=r=>F(r,"bottom-right")),class:"resizer bottom-right"},null,36)],4)],512),[[Ze,E.value]])])]),Rt]))}}),Dt=(l,e)=>{const t=l.__vccOpts||l;for(const[i,o]of e)t[i]=o;return t},Lt=Dt(Et,[["__scopeId","data-v-528732de"]]),A=l=>(Me("data-v-3097b021"),l=l(),Se(),l),Ut={class:"main-home-div"},Tt={class:"feature-container-mobile"},jt=["disabled"],Pt=A(()=>f("img",{src:Oe,alt:"Upload"},null,-1)),Mt=[Pt],St=["disabled"],Ot=A(()=>f("img",{src:Ae,alt:"Crop"},null,-1)),At=[Ot],Ft=["disabled"],Ht=A(()=>f("img",{src:Fe,alt:"Paint"},null,-1)),Wt=[Ht],zt=["disabled"],Vt=A(()=>f("img",{src:He,alt:"Download"},null,-1)),Yt=[Vt],Xt={class:"container-button-editor"},Gt={class:"editor-image-div"},$t={class:"feature-buttons"},qt=["disabled"],Nt=A(()=>f("img",{src:Oe,alt:"Upload"},null,-1)),Kt=["disabled"],Zt=A(()=>f("img",{src:Ae,alt:"Crop"},null,-1)),Jt=["disabled"],Qt=A(()=>f("img",{src:Fe,alt:"Paint"},null,-1)),ea=["disabled"],ta=A(()=>f("img",{src:He,alt:"Download"},null,-1)),aa={key:0,class:"control-buttons"},na=je({__name:"Home",setup(l){const e=m(""),t=m(),i=m(null),o=m(!1),c=m(!1),C=m(null),u=m(0);Pe(()=>{});function g(){C.value.click(),u.value=1}function h(w){t.value=(w==null?void 0:w.target).files[0],u.value=0}function b(){i.value.enableCroping(),c.value=!0,u.value=2}function p(){i.value.enablePainting(),o.value=!0,u.value=3}function k(w){console.log("Final File After Change",w)}function s(){i.value.download(),u.value=4,setTimeout(()=>{u.value=0},2e3)}function x(){i.value.saveChanges(),o.value=!1,c.value=!1,u.value=0}function B(){i.value.cancelChanges(),o.value=!1,c.value=!1,u.value=0}return(w,I)=>(ke(),Be("div",Ut,[f("div",Tt,[f("div",{class:Je(["selection-circle-div",`state-${u.value}`])},null,2),f("button",{disabled:o.value||c.value,class:"btn",onClick:g},Mt,8,jt),f("button",{disabled:o.value||t.value==null,class:"btn",onClick:b},At,8,St),f("button",{disabled:c.value||t.value==null,class:"btn",onClick:p},Wt,8,Ft),f("button",{disabled:o.value||c.value||t.value==null,class:"btn",onClick:s},Yt,8,zt)]),f("div",Xt,[f("div",Gt,[Qe(et(Lt),{onFinishEditing:k,"max-height":500,"max-width":500,ref_key:"imageEditor",ref:i,"background-crop-div-color":"white","border-crop-div-color":"#4286f4","color-brush":e.value,"file-image":t.value,"onUpdate:fileImage":I[0]||(I[0]=d=>t.value=d)},null,8,["color-brush","file-image"])]),f("div",$t,[f("button",{disabled:o.value||c.value,onClick:g,class:"btn"},[f("input",{ref_key:"inputUploadFile",ref:C,type:"file",onChange:h},null,544),Nt,me(" Upload ")],8,qt),f("button",{disabled:o.value||c.value||t.value==null,onClick:b,class:"btn"},[Zt,me(" Crop ")],8,Kt),f("button",{disabled:o.value||c.value||t.value==null,onClick:p,class:"btn"},[Qt,me(" Paint ")],8,Jt),f("button",{disabled:o.value||c.value||t.value==null,onClick:s,class:"btn"},[ta,me(" Download ")],8,ea)]),o.value||c.value?(ke(),Be("div",aa,[f("button",{onClick:B,class:"btn"}," Cancel "),f("button",{onClick:x,class:"btn"}," Save ")])):tt("",!0)])]))}}),oa=(l,e)=>{const t=l.__vccOpts||l;for(const[i,o]of e)t[i]=o;return t},la=oa(na,[["__scopeId","data-v-3097b021"]]);export{la as default};
